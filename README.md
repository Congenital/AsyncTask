# AsyncTask

### 简单
一个简单解决因依赖异步bindService导致的，bindService中无法使用服务，并且无法有效判断服务有效性的项目。

### 有效
不只可以用在bindService中，大部分无法有效处理的任务，或等待异步初始化完成的场景都可以使用。


### 示例
```java
// 构造任务管理器
// T为需要等待异步初始化成功的对象类型，一般是binder service接口
TaskManager manager = new TaskManager<T>;

// 初始化任务管理器, 异步初始化成功后，将成功初始化的对象传递进去
manager.init(T t);

// 执行异步任务
// 默认会等待异步初始化，当初始化成功后，会主动调用ITask,
// 当Context为Activity实例的时候，可以进行UI操作
// 非Activity示例默认单独线程操作，要注意任务不要阻塞该线程
manager.postTask(Context context, ITask<T> task);
```

### 引申

一个有意思的买包子的问题

包子铺与服务:
服务初始化中 = 包子准备中
服务初始化成功 = 包子准备完成，包子铺开业中

买包子与调用服务:
给包子铺钱 = 传递数据给服务
得到包子 = 得到服务返回的数据

正常bindService就是经历:
包子准备中 -> 包子铺开业

买包子就是:
给包子铺钱 -> 得到包子

但是买包子过程中包子铺可能还在准备包子（也就是服务还在初始化），也就是买不到包子（得不到服务，得不到数据）
那么就可以先将钱放在包子铺门口并写上地址(也就是ITask<T> 回调)，在包子铺准备好包子并开业后（也就是manager.init(T t)初始化调用后，这时候说明服务已经准备完成了）
然后由包子铺（服务）将之前你给的回调和数据（你给钱和地址）来给你把包子送到家（变主动为被动）

好处就是你不用等了， 也不用担心没包子了，因为只要包子铺（服务）开业就会主动给你送到家

至于包子铺（服务）开业后（初始化成功），你可以直接买到包子，也就不用送到家（初始化过程中的被动回调）了，这时候是一手交钱一手交包子。

感谢 [@艾同学](https://github.com/dlaiFor) 的参与，为这个小玩具提供的想法及技术支持。
